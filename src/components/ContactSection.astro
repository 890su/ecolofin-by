---
import CTAForm from './CTAForm.astro';
---

<section id="contacts" class="section-padding bg-white">
  <div class="container-custom">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        Контакты
      </h2>
      <p class="text-lg text-gray-600">
        Свяжитесь с нами удобным способом
      </p>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
      <!-- Contact Info -->
      <div class="space-y-6">
        <div>
          <h3 class="text-xl font-bold text-gray-900 mb-4">Адрес</h3>
          <p class="text-gray-700">
            220104, Минск, ул. Михася Лынькова, дом 19/1, каб. 3-26
          </p>
        </div>
        
        <div>
          <h3 class="text-xl font-bold text-gray-900 mb-4">Телефоны</h3>
          <div class="space-y-2">
            <a href="tel:+375296908945" class="block text-lg text-primary-600 hover:text-primary-700 transition-colors">
              8 (029) 690-89-45
            </a>
            <a href="tel:+375173738945" class="block text-lg text-primary-600 hover:text-primary-700 transition-colors">
              8 (017) 373-89-45
            </a>
          </div>
        </div>
        
        <div>
          <h3 class="text-xl font-bold text-gray-900 mb-4">Email</h3>
          <a href="mailto:info@ecolofin.by" class="text-lg text-primary-600 hover:text-primary-700 transition-colors">
            info@ecolofin.by
          </a>
        </div>
        
        <div>
          <h3 class="text-xl font-bold text-gray-900 mb-4">Время работы</h3>
          <p class="text-gray-700">
            Понедельник - Пятница: 8:00 - 18:00
          </p>
        </div>
      </div>
      
      <!-- Map and Form -->
      <div class="space-y-6">
        <!-- Yandex Map -->
        <div class="h-64 md:h-96 bg-gray-200 rounded-lg overflow-hidden">
          <div id="map-lazy" class="w-full h-full flex items-center justify-center text-gray-500">
            Загрузка карты...
          </div>
        </div>
        
        <!-- Contact Form -->
        <CTAForm
          title="Напишите нам"
          subtitle="Заполните форму, и мы свяжемся с вами"
          source="Контакты"
          compact={true}
        />
      </div>
    </div>
  </div>
</section>

<script>
  // Lazy load Yandex Maps
  document.addEventListener('DOMContentLoaded', () => {
    const mapContainer = document.getElementById('map-lazy');
    if (!mapContainer) return;
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const script = document.createElement('script');
          script.type = 'text/javascript';
          script.charset = 'utf-8';
          script.async = true;
          script.src = 'https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A7b5d510e1c14cc8136ad276ef0703510e188687c7e4bf6682a5e695c3785dde4&width=100%25&height=100%25&lang=ru_RU&scroll=true';
          mapContainer.innerHTML = '';
          mapContainer.appendChild(script);
          observer.disconnect();
        }
      });
    }, { rootMargin: '50px' });
    
    observer.observe(mapContainer);
  });
</script>
